!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.primitives}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var c=o.apply(null,r);c&&e.push(c)}else if("object"===i)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e){e.exports=JSON.parse('{"name":"hrswp/document-select","category":"media","supports":{"inserter":false,"reusable":false,"html":false},"attributes":{"useExternalFile":{"type":"boolean","default":false}}}')},function(e,t,n){var r=n(18),o=n(19),i=n(14),c=n(20);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||c()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(24);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(25),o=n(5);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e){e.exports=JSON.parse('{"name":"hrswp/documents-list","category":"media","supports":{"align":true,"html":false}}')},function(e,t,n){var r=n(15);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var r=n(21),o=n(22),i=n(14),c=n(23);e.exports=function(e){return r(e)||o(e)||i(e)||c()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(15);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return be})),n.d(r,"settings",(function(){return ye}));var o={};n.r(o),n.d(o,"metadata",(function(){return Ze})),n.d(o,"name",(function(){return tt})),n.d(o,"settings",(function(){return ot}));var i=n(8),c=n.n(i),a=n(3),l=n.n(a),s=n(16),u=n.n(s),m=n(17),p=n.n(m),d=n(9),f=n.n(d),b=n(10),h=n.n(b),g=n(11),y=n.n(g),O=n(12),v=n.n(O),j=n(6),w=n.n(j),E=n(0),x=n(1),_=n(4),S=n.n(_),C=n(2),k=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(E.createElement)(C.Path,{d:"M19 18V2c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1v16c0 .55.45 1 1 1h16c.55 0 1-.45 1-1zM4 3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v6H6V3h11zM4 11c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v6H6v-6h11z"})),P=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Object(E.createElement)(C.Path,{d:"M2 1h16c.55 0 1 .45 1 1v16c0 .55-.45 1-1 1H2c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1zm7.01 7.99v-6H3v6h6.01zm8 0v-6h-6v6h6zm-8 8.01v-6H3v6h6.01zm8 0v-6h-6v6h6z"})),D=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(E.createElement)(C.Path,{d:"M10.44 3.02l1.82-1.82 6.36 6.35-1.83 1.82c-1.05-.68-2.48-.57-3.41.36l-.75.75c-.92.93-1.04 2.35-.35 3.41l-1.83 1.82-2.41-2.41-2.8 2.79c-.42.42-3.38 2.71-3.8 2.29s1.86-3.39 2.28-3.81l2.79-2.79L4.1 9.36l1.83-1.82c1.05.69 2.48.57 3.4-.36l.75-.75c.93-.92 1.05-2.35.36-3.41z"})),I=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Object(E.createElement)(C.Path,{d:"M2 19h16c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1v16c0 .55.45 1 1 1zM4 3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6V3h11zM4 7c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6V7h11zM4 11c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6v-2h11zM4 15c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6v-2h11z"})),z=wp.element.Fragment,T=function(e){var t=e.terms,n=e.taxonomySlug,r=e.post,o=e.prefix,i=r["category"===n||"post_tag"===n?"category"===n?"categories":"tags":n];if(!(Array.isArray(i)&&i.length))return null;var c=Object(x.filter)(t[n],(function(e){return Object(x.includes)(i,e.id)}));return Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--".concat(n,"-list")},Object(E.createElement)("span",null,o),c.map((function(e,t){var n=t>0?", ":"";return Object(E.createElement)(z,{key:t},n,Object(E.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener"},e.name))})))},L=wp.i18n.__,A=wp.date,U=A.dateI18n,F=A.format,M=A.__experimentalGetSettings,N=function(e){var t=e.displayDocumentCategory,n=e.displayDocumentDate,r=e.displayDocumentTag,o=e.displayDocumentTaxonomy,i=e.post,c=e.taxonomies,a=e.termLists,l=M().formats.date,s=t||r||o;return s&&c&&c.push(c.splice(c.findIndex((function(e){return"post_tag"===e.slug})),1)[0]),Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--meta"},s&&c.map((function(e){var n;if("category"===e.slug){if(!t)return null;n=L("More on: ")}else if("post_tag"===e.slug){if(!r)return null;n="Tagged: "}else{if(!o)return null;n="".concat(e.labels.singular_name,": ")}return Object(E.createElement)(T,{key:e.slug,post:i,terms:a,taxonomySlug:e.slug,prefix:n})})),n&&i.date_gmt&&Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--post-date"},L("Published on "),Object(E.createElement)("time",{dateTime:F("c",i.date_gmt)},U(l,i.date_gmt))))},R={per_page:-1};function H(e,t){return e?e[t]&&e[t].length>0?e[t].map((function(e){return e.id})):[]:null}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v()(this,n)}}var W=wp.element,J=W.Component,q=W.RawHTML,Q=wp.components,Y=Q.BaseControl,$=Q.CheckboxControl,K=Q.PanelBody,X=Q.Placeholder,Z=Q.QueryControls,ee=Q.RangeControl,te=Q.Spinner,ne=Q.ToggleControl,re=Q.ToolbarGroup,oe=wp.i18n.__,ie=wp.blockEditor,ce=ie.InspectorControls,ae=ie.BlockAlignmentToolbar,le=ie.BlockControls,se=ie.__experimentalImageSizeControl,ue=wp.data.withSelect,me=function(e){y()(n,e);var t=G(n);function n(){return f()(this,n),t.apply(this,arguments)}return h()(n,[{key:"toggleSelectedTerms",value:function(e,t){var n=this.props,r=n.attributes,o=n.setAttributes,i=r.selectedTermLists,c=Object(x.isUndefined)(i)?{}:i,a=Object(x.isUndefined)(c[e])?c[e]=[]:c[e],l=Object(x.includes)(H(c,e),t.id)?Object(x.remove)(a,(function(e){return e.id!==t.id})):[].concat(p()(a),[t]);c[e]=l,o({selectedTermLists:c})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.setAttributes,o=t.className,i=t.imageSizeOptions,c=t.documentsList,a=t.taxonomies,s=t.termLists,m=t.defaultImageWidth,p=t.defaultImageHeight,d=n.displayFeaturedImage,f=n.displayDocumentExcerpt,b=n.displayDocumentDate,h=n.displayDocumentCategory,g=n.displayDocumentTag,y=n.displayDocumentTaxonomy,O=n.documentLayout,v=n.columns,j=n.order,w=n.orderBy,_=n.selectedTermLists,C=n.documentsToShow,k=n.excerptLength,z=n.featuredImageAlign,T=n.featuredImageSizeSlug,L=n.featuredImageSizeWidth,A=n.featuredImageSizeHeight;T||r({featuredImageSizeSlug:"thumbnail"});var U=Object(E.createElement)(ce,null,Object(E.createElement)(K,{title:oe("Post content settings")},Object(E.createElement)(ne,{label:oe("Post content"),checked:f,onChange:function(e){return r({displayDocumentExcerpt:e})}}),f&&Object(E.createElement)(ee,{label:oe("Max number of words in excerpt"),value:k,onChange:function(e){return r({excerptLength:e})},min:10,max:100})),Object(E.createElement)(K,{title:oe("Post meta settings")},Object(E.createElement)(ne,{label:oe("Display post date"),checked:b,onChange:function(e){return r({displayDocumentDate:e})}}),Object(E.createElement)(ne,{label:oe("Display post category"),checked:h,onChange:function(e){return r({displayDocumentCategory:e})}}),Object(E.createElement)(ne,{label:oe("Display post tag"),checked:g,onChange:function(e){return r({displayDocumentTag:e})}}),Object(E.createElement)(ne,{label:oe("Display post taxonomy"),checked:y,onChange:function(e){return r({displayDocumentTaxonomy:e})}})),Object(E.createElement)(K,{title:oe("Featured image settings")},Object(E.createElement)(ne,{label:oe("Display featured image"),checked:d,onChange:function(e){return r({displayFeaturedImage:e})}}),d&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)(se,{onChange:function(e){var t={};e.hasOwnProperty("width")&&(t.featuredImageSizeWidth=e.width),e.hasOwnProperty("height")&&(t.featuredImageSizeHeight=e.height),r(t)},slug:T,width:L,height:A,imageWidth:m,imageHeight:p,imageSizeOptions:i,onChangeImage:function(e){return r({featuredImageSizeSlug:e,featuredImageSizeWidth:void 0,featuredImageSizeHeight:void 0})}}),Object(E.createElement)(Y,null,Object(E.createElement)(Y.VisualLabel,null,oe("Image alignment")),Object(E.createElement)(ae,{value:z,onChange:function(e){return r({featuredImageAlign:e})},controls:["left","center","right"],isCollapsed:!1})))),Object(E.createElement)(K,{className:"".concat(o," taxonomy-filter"),title:oe("Filtering"),initialOpen:!1},a.map((function(t){return Object(E.createElement)(K,{className:"taxonomy-filter--body",key:t.slug,title:t.name,initialOpen:!1},Object(E.createElement)("ul",{className:"edit__checklist"},s[t.slug]&&s[t.slug].map((function(n){return Object(E.createElement)("li",{key:n.id,className:"components-checkbox-control__label"},Object(E.createElement)($,{label:n.name,checked:Object(x.includes)(H(_,t.rest_base),n.id),onChange:function(){e.toggleSelectedTerms(t.rest_base,n)}}))}))))}))),Object(E.createElement)(K,{title:oe("Order and number"),initialOpen:!1},Object(E.createElement)(Z,u()({order:j,orderBy:w},{numberOfItems:C,onOrderChange:function(e){return r({order:e})},onOrderByChange:function(e){return r({orderBy:e})},onNumberOfItemsChange:function(e){return r({documentsToShow:e})}})),"grid"===O&&Object(E.createElement)(ee,{label:oe("Maximum columns"),value:v,onChange:function(e){return r({columns:e})},min:2,max:F?Math.min(6,c.length):6,required:!0}))),F=Array.isArray(c)&&c.length;if(!F)return Object(E.createElement)(E.Fragment,null,U,Object(E.createElement)(X,{icon:D,label:oe("Posts")},Array.isArray(c)?oe("No posts found."):Object(E.createElement)(te,null)));var M=c.length>C?c.slice(0,C):c,R=[{icon:I,title:oe("List view"),onClick:function(){return r({documentLayout:"list"})},isActive:"list"===O},{icon:P,title:oe("Grid view"),onClick:function(){return r({documentLayout:"grid"})},isActive:"grid"===O}];return Object(E.createElement)(E.Fragment,null,U,Object(E.createElement)(le,null,Object(E.createElement)(re,{controls:R})),Object(E.createElement)("div",{className:S()(o,l()({"is-grid":"grid"===O,"has-feature-image":d,"has-date":b,"has-excerpt":f},"columns-".concat(v),"grid"===O))},M.map((function(e,t){var n,r=Object(x.invoke)(e,["title","rendered","trim"]),o=e.excerpt.rendered,i=document.createElement("div");i.innerHTML=o,o=i.textContent||i.innerText||"";var c=e.featuredImageSourceUrl,u=S()((n={"wp-block-hrswp-documents-list--featured-image":!0},l()(n,"size-".concat(T),!!T),l()(n,"align".concat(z),!!z),n)),m=b||h||g||y,p=k<o.trim().split(" ").length&&""===e.excerpt.raw?Object(E.createElement)(E.Fragment,null,o.trim().split(" ",k).join(" "),oe(" â€¦ ")):o;return Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--list-item",key:t},d&&c&&Object(E.createElement)("figure",{className:u},c&&Object(E.createElement)("img",{src:c,alt:"",style:{maxWidth:L,maxHeight:A}})),Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--body"},Object(E.createElement)("h3",{className:"wp-block-hrswp-documents-list--heading"},Object(E.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener"},r?Object(E.createElement)(q,null,r):oe("(no title)"))),f&&Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--post-excerpt"},p),m&&Object(E.createElement)(N,{displayDocumentCategory:h,displayDocumentDate:b,displayDocumentTag:g,displayDocumentTaxonomy:y,post:e,taxonomies:a,termLists:s})))}))))}}]),n}(J),pe=ue((function(e,t){var n,r=t.attributes,o=r.featuredImageSizeSlug,i=r.documentsToShow,a=r.order,l=r.orderBy,s=r.selectedTermLists,u=e("core"),m=u.getEntityRecords,p=u.getMedia,d=u.getTaxonomies,f=(0,e("core/block-editor").getSettings)(),b=f.imageSizes,h=f.imageDimensions,g=Object(x.pickBy)({order:a,orderby:l,per_page:i},(function(e){return!Object(x.isUndefined)(e)}));Object(x.isUndefined)(s)||Object.entries(s).forEach((function(e){var t=c()(e,2),n=t[0],r=t[1];g[n]=r.map((function(e){return e.id}))}));var y=m("postType","hrswp_documents",g),O=d(R),v=Object(x.filter)(O,(function(e){return Object(x.includes)(e.types,"post")})),j={};v.forEach((function(e){var t=e.slug;Object.defineProperty(j,t,{value:m("taxonomy",t,R)})}));var w=b.filter((function(e){return"full"!==e.slug})).map((function(e){var t=e.name;return{value:e.slug,label:t}})),E=Array.isArray(y)?y.map((function(e){if(0!==e.featured_media?n=p(e.featured_media):0!==e.meta._hrswp_document_file_id&&(n=p(e.meta._hrswp_document_file_id)),n){var t=Object(x.get)(n,["media_details","sizes",o,"source_url"],null);return t||(t=Object(x.get)(n,"source_url",null)),V(V({},e),{},{featuredImageSourceUrl:t})}return e})):y;return{defaultImageWidth:Object(x.get)(h,[o,"width"],0),defaultImageHeight:Object(x.get)(h,[o,"height"],0),imageSizeOptions:w,taxonomies:v,termLists:j,documentsList:E}}))(me),de=n(13),fe=wp.i18n.__,be=de.name,he=de.category,ge=de.supports,ye={title:fe("Documents List"),icon:k,category:he,description:fe("Display a list of documents."),keywords:[fe("media"),fe("documents")],supports:ge,example:{},edit:pe},Oe=n(5),ve=n.n(Oe),je=wp.components,we=je.SVG,Ee=je.Path,xe=Object(E.createElement)(we,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(E.createElement)(Ee,{d:"M19 6.2h-5.9l-.6-1.1c-.3-.7-1-1.1-1.8-1.1H5c-1.1 0-2 .9-2 2v11.8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8.2c0-1.1-.9-2-2-2zm.5 11.6c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h5.8c.2 0 .4.1.4.3l1 2H19c.3 0 .5.2.5.5v9.5z"}));function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v()(this,n)}}var Se=wp.blob,Ce=Se.getBlobByURL,ke=Se.isBlobURL,Pe=Se.revokeBlobURL,De=wp.components,Ie=De.Animate,ze=De.ClipboardButton,Te=De.Disabled,Le=De.PanelBody,Ae=De.ToggleControl,Ue=De.withNotices,Fe=wp.compose.compose,Me=wp.data,Ne=Me.withSelect,Re=Me.withDispatch,He=wp.date.dateI18n,Be=wp.blockEditor,Ve=Be.BlockControls,Ge=Be.BlockIcon,We=Be.InspectorControls,Je=Be.MediaPlaceholder,qe=Be.MediaReplaceFlow,Qe=Be.URLInput,Ye=wp.element.Component,$e=wp.i18n.__,Ke=function(e){y()(n,e);var t=_e(n);function n(){var e;return f()(this,n),(e=t.apply(this,arguments)).onSelectFile=e.onSelectFile.bind(ve()(e)),e.confirmCopyURL=e.confirmCopyURL.bind(ve()(e)),e.resetCopyConfirmation=e.resetCopyConfirmation.bind(ve()(e)),e.onUploadError=e.onUploadError.bind(ve()(e)),e.state={hasError:!1,showCopyConfirmation:!1},e}return h()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.mediaHref,r=t.mediaUpload,o=t.noticeOperations;ke(n)&&(r({filesList:[Ce(n)],onFileChange:function(t){var n=c()(t,1)[0];return e.onSelectFile(n)},onError:function(t){e.setState({hasError:!0}),o.createErrorNotice(t)}}),Pe(n))}},{key:"componentDidUpdate",value:function(e){e.isSelected&&!this.props.isSelected&&this.setState({showCopyConfirmation:!1})}},{key:"onSelectFile",value:function(e){e&&e.url&&(this.setState({hasError:!1}),this.props.updateMeta(e.id,"_hrswp_document_file_id"),this.props.updateMeta(e.url,"_hrswp_document_file_href"))}},{key:"onUploadError",value:function(e){var t=this.props.noticeOperations;t.removeAllNotices(),t.createErrorNotice(e)}},{key:"confirmCopyURL",value:function(){this.setState({showCopyConfirmation:!0})}},{key:"resetCopyConfirmation",value:function(){this.setState({showCopyConfirmation:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.className,o=t.isSelected,i=t.noticeUI,c=t.media,a=t.mediaHref,l=t.permalink,s=t.setAttributes,u=t.useFeatureImage,m=this.state,p=m.hasError,d=m.showCopyConfirmation,f=n.useExternalFile,b=c?c.media_details.sizes.medium:void 0,h=c?c.id:void 0,g=Object(E.createElement)(We,null,Object(E.createElement)(Le,{title:$e("Document source settings")},Object(E.createElement)(Ae,{label:$e("Use external file"),checked:f,onChange:function(e){return s({useExternalFile:e})}})));if(!f&&(!c||p))return Object(E.createElement)(E.Fragment,null,g,Object(E.createElement)(Je,{icon:Object(E.createElement)(Ge,{icon:xe}),labels:{title:$e("File"),instructions:$e("Upload a file or pick one from your media library.")},onSelect:this.onSelectFile,notices:i,onError:this.onUploadError,accept:"*"}));var y=S()(r,{"is-transient":ke(a)});return Object(E.createElement)(E.Fragment,null,g,!f&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)(Ve,null,Object(E.createElement)(qe,{mediaId:h,mediaURL:a,accept:"*",onSelect:this.onSelectFile,onError:this.onUploadError})),Object(E.createElement)(Ie,{type:ke(a)?"loading":null},(function(t){var n=t.className;return Object(E.createElement)("div",{className:S()(y,n)},Object(E.createElement)(Te,null,c&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)("img",{src:b.source_url,alt:"",width:b.width,height:b.height}),Object(E.createElement)("p",null,Object(E.createElement)("strong",null,$e("File title: ")),c.title.rendered),Object(E.createElement)("p",null,Object(E.createElement)("strong",null,$e("Uploaded: ")),Object(E.createElement)("time",{dateTime:He("c",c.date)},He("F j, Y",c.date))))),o&&Object(E.createElement)(ze,{isSecondary:!0,text:l,className:"wp-block-file__copy-url-button",onCopy:e.confirmCopyURL,onFinishCopy:e.resetCopyConfirmation,disabled:ke(l)},$e(d?"Copied!":"Copy URL")))}))),f&&Object(E.createElement)("div",{className:S()(r,"use-external-file")},Object(E.createElement)("div",{className:"components-placeholder block-editor-media-placeholder is-large"},Object(E.createElement)("div",{className:"components-placeholder__label"},$e("File URL")),Object(E.createElement)("div",{className:"components-placeholder__instructions"},$e("Enter the full URL of the external document.")),Object(E.createElement)(Qe,{value:a,onChange:function(t){return e.props.updateMeta(t,"_hrswp_document_file_href")}}),u&&c&&Object(E.createElement)("img",{src:b.source_url,alt:"",width:b.width,height:b.height}))))}}]),n}(Ye),Xe=Fe([Re((function(e){return{updateMeta:function(t,n){e("core/editor").editPost({meta:l()({},n,t)})}}})),Ne((function(e){var t,n=e("core").getMedia,r=(0,e("core/block-editor").getSettings)().mediaUpload,o=e("core/editor").getEditedPostAttribute("featured_media"),i=e("core/editor").getEditedPostAttribute("meta")._hrswp_document_file_id,c=!1;return 0!==o?(t=void 0===o?void 0:n(o),c=!0):t=0===i?void 0:n(i),{media:t,permalink:e("core/editor").getPermalink(),mediaHref:e("core/editor").getEditedPostAttribute("meta")._hrswp_document_file_href,mediaUpload:r,useFeatureImage:c}})),Ue])(Ke),Ze=n(7),et=wp.i18n.__,tt=Ze.name,nt=Ze.attributes,rt=Ze.supports,ot={title:et("Document Select"),description:et("Select or upload a file."),icon:xe,keywords:[et("document"),et("pdf"),et("upload")],attributes:nt,supports:rt,edit:Xe},it=wp.blocks.registerBlockType;[r,o].forEach((function(e){if(e){var t=e.settings,n=e.name;it(n,t)}}))}]);